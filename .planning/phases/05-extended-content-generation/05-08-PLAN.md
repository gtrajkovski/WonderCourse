---
phase: 05-extended-content-generation
plan: 08
type: tdd
wave: 2
depends_on: ["05-01"]
files_modified:
  - src/generators/project_generator.py
  - tests/test_project_generator.py
autonomous: true

must_haves:
  truths:
    - "ProjectMilestoneGenerator extends BaseGenerator[ProjectMilestoneSchema] and generates scaffolded project milestones"
    - "Generated milestone has A1/A2/A3 type, deliverables, grading criteria, and prerequisites"
    - "Metadata includes word_count, estimated_duration_minutes, milestone_type, content_type"
  artifacts:
    - path: "src/generators/project_generator.py"
      provides: "ProjectMilestoneGenerator class"
      contains: "class ProjectMilestoneGenerator"
    - path: "tests/test_project_generator.py"
      provides: "Tests for ProjectMilestoneGenerator"
      contains: "test_generate_returns_valid_schema"
  key_links:
    - from: "src/generators/project_generator.py"
      to: "src/generators/base_generator.py"
      via: "class inheritance"
      pattern: "class ProjectMilestoneGenerator\\(BaseGenerator\\[ProjectMilestoneSchema\\]\\)"
---

<objective>
Create ProjectMilestoneGenerator with TDD for scaffolded A1/A2/A3 project milestones with progressive deliverables.

Purpose: Enable generation of multi-stage project milestone prompts that build progressively from foundation to advanced.
Output: Working ProjectMilestoneGenerator with tests
</objective>

<execution_context>
@C:\Users\gpt30\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\gpt30\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@src/generators/base_generator.py
@src/generators/quiz_generator.py
@tests/test_quiz_generator.py
@src/generators/schemas/project.py
</context>

<feature>
  <name>ProjectMilestoneGenerator</name>
  <files>src/generators/project_generator.py, tests/test_project_generator.py</files>
  <behavior>
    ProjectMilestoneGenerator extends BaseGenerator[ProjectMilestoneSchema].

    - system_prompt: Expert in project-based learning design. Guidelines: milestones build progressively (A1=foundation/setup, A2=core implementation, A3=advanced features/polish), clear deliverables with submission format, grading criteria aligned to milestone stage, realistic time estimates. Prerequisites connect milestones (A2 depends on A1, A3 depends on A2).
    - build_user_prompt(learning_objective, topic, milestone_type="A1", estimated_hours=10, difficulty="intermediate"): Returns formatted prompt for project milestone with deliverables, criteria, and prerequisites.
    - extract_metadata(content: ProjectMilestoneSchema) -> dict: Returns word_count (sum all text fields), estimated_duration_minutes (content.estimated_hours * 60), milestone_type (content.milestone_type), num_deliverables, content_type ("project").
    - generate_milestone() convenience method.

    Test cases:
    1. test_generate_returns_valid_schema - Mock API, verify ProjectMilestoneSchema with deliverables and criteria
    2. test_milestone_type_is_valid - milestone_type is one of A1, A2, A3
    3. test_deliverables_have_format - Each deliverable has name, description, format fields
    4. test_system_prompt_mentions_scaffolding - System prompt references progressive/scaffolded/A1/A2/A3
    5. test_build_user_prompt_includes_milestone_type - Prompt includes milestone_type parameter
    6. test_extract_metadata_includes_milestone_type - Metadata has milestone_type field
  </behavior>
  <implementation>
    Follow quiz_generator.py pattern. Create sample project milestone JSON fixture with A1 type. Mock Anthropic via mocker.patch.
  </implementation>
</feature>

<verification>
`pytest tests/test_project_generator.py -v` -- all 6 tests pass
</verification>

<success_criteria>
- ProjectMilestoneGenerator importable and extends BaseGenerator[ProjectMilestoneSchema]
- All 6 tests pass with mocked API
</success_criteria>

<output>
After completion, create `.planning/phases/05-extended-content-generation/05-08-SUMMARY.md`
</output>
