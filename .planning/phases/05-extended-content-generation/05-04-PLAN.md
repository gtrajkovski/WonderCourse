---
phase: 05-extended-content-generation
plan: 04
type: tdd
wave: 2
depends_on: ["05-01"]
files_modified:
  - src/generators/practice_quiz_generator.py
  - tests/test_practice_quiz_generator.py
autonomous: true

must_haves:
  truths:
    - "PracticeQuizGenerator extends BaseGenerator[PracticeQuizSchema] and generates formative quizzes"
    - "Practice quiz uses PracticeQuizSchema (separate from QuizSchema)"
    - "Each question has bloom_level and each option has hint field"
    - "No passing_score_percentage (formative, not graded)"
    - "Metadata includes word_count, estimated_duration_minutes, question_count, content_type"
  artifacts:
    - path: "src/generators/practice_quiz_generator.py"
      provides: "PracticeQuizGenerator class"
      contains: "class PracticeQuizGenerator"
    - path: "tests/test_practice_quiz_generator.py"
      provides: "Tests for PracticeQuizGenerator"
      contains: "test_generate_returns_valid_schema"
  key_links:
    - from: "src/generators/practice_quiz_generator.py"
      to: "src/generators/base_generator.py"
      via: "class inheritance"
      pattern: "class PracticeQuizGenerator\\(BaseGenerator\\[PracticeQuizSchema\\]\\)"
---

<objective>
Create PracticeQuizGenerator with TDD for formative assessment quizzes with immediate feedback and hints.

Purpose: Enable generation of practice quizzes that support learning through feedback rather than grading.
Output: Working PracticeQuizGenerator with tests
</objective>

<execution_context>
@C:\Users\gpt30\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\gpt30\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@src/generators/base_generator.py
@src/generators/quiz_generator.py
@tests/test_quiz_generator.py
@src/generators/schemas/practice_quiz.py
</context>

<feature>
  <name>PracticeQuizGenerator</name>
  <files>src/generators/practice_quiz_generator.py, tests/test_practice_quiz_generator.py</files>
  <behavior>
    PracticeQuizGenerator extends BaseGenerator[PracticeQuizSchema].

    - system_prompt: Expert assessment designer for formative assessment. Focus on learning support, not evaluation. Guidelines: hints guide toward correct answer without giving it away, feedback explains misconceptions, questions build confidence through scaffolded difficulty. Emphasize immediate feedback for self-paced learning.
    - build_user_prompt(learning_objective, topic, bloom_level, num_questions=5, difficulty="intermediate"): Returns formatted prompt for practice quiz with emphasis on formative assessment.
    - extract_metadata(content: PracticeQuizSchema) -> dict: Returns word_count, estimated_duration_minutes (1.5 min/question via ContentMetadata), question_count, content_type ("practice_quiz").
    - generate_practice_quiz() convenience method.

    Test cases:
    1. test_generate_returns_valid_schema - Mock API, verify PracticeQuizSchema (NOT QuizSchema)
    2. test_options_have_hints - Every option has a non-empty hint field
    3. test_questions_have_bloom_level - Each question has bloom_level field
    4. test_system_prompt_emphasizes_formative - System prompt mentions formative/practice/learning
    5. test_build_user_prompt_includes_params - Prompt includes learning_objective, bloom_level, num_questions
    6. test_extract_metadata_calculates_duration - Duration uses 1.5 min/question rate
    7. test_api_called_with_output_config - Verify output_config parameter
  </behavior>
  <implementation>
    Follow quiz_generator.py pattern but use PracticeQuizSchema. Create sample practice quiz JSON fixture with hints on every option. Mock Anthropic via mocker.patch.
  </implementation>
</feature>

<verification>
`pytest tests/test_practice_quiz_generator.py -v` -- all 7 tests pass
</verification>

<success_criteria>
- PracticeQuizGenerator uses PracticeQuizSchema (NOT QuizSchema)
- All 7 tests pass with mocked API
- Options include hint field for formative feedback
</success_criteria>

<output>
After completion, create `.planning/phases/05-extended-content-generation/05-04-SUMMARY.md`
</output>
