---
phase: 11-ui-implementation
plan: 10
type: execute
wave: 5
depends_on: ["11-02", "11-03", "11-04", "11-05", "11-06", "11-07", "11-08", "11-09"]
files_modified:
  - app.py
  - templates/base.html
  - static/css/main.css
autonomous: false

must_haves:
  truths:
    - "All pages render without errors"
    - "Navigation between pages works correctly"
    - "Sidebar shows appropriate context on each page"
    - "Dark theme is consistent across all pages"
    - "User flows complete without errors"
  artifacts:
    - path: "app.py"
      provides: "All page routes registered"
      contains: "route"
  key_links:
    - from: "templates/base.html"
      to: "all page templates"
      via: "extends"
      pattern: "extends.*base"
---

<objective>
Integrate all UI components, verify cross-page navigation, and conduct visual verification of the complete UI implementation.

Purpose: This final plan ensures all pages work together cohesively, navigation flows are correct, and the dark theme is consistently applied.

Output: Fully integrated UI with verified navigation, consistent theming, and human verification of visual quality.
</objective>

<execution_context>
@C:\Users\gpt30\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\gpt30\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/11-ui-implementation/11-CONTEXT.md
@.planning/phases/11-ui-implementation/11-01-SUMMARY.md
@.planning/phases/11-ui-implementation/11-02-SUMMARY.md
@.planning/phases/11-ui-implementation/11-03-SUMMARY.md
@.planning/phases/11-ui-implementation/11-04-SUMMARY.md
@.planning/phases/11-ui-implementation/11-05-SUMMARY.md
@.planning/phases/11-ui-implementation/11-06-SUMMARY.md
@.planning/phases/11-ui-implementation/11-07-SUMMARY.md
@.planning/phases/11-ui-implementation/11-08-SUMMARY.md
@.planning/phases/11-ui-implementation/11-09-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify and Fix Route Integration</name>
  <files>
    app.py
    templates/base.html
  </files>
  <action>
Verify all routes are properly registered and working:

**Verification Steps:**

1. List all expected routes:
   - / (redirect to login or dashboard)
   - /login
   - /register
   - /dashboard
   - /courses/{id}/planner
   - /courses/{id}/builder
   - /courses/{id}/studio
   - /courses/{id}/textbook
   - /courses/{id}/publish

2. Check app.py for all route registrations

3. Verify each route:
   - Returns correct template
   - Passes required context (course, active_page, breadcrumb)
   - Has @login_required where appropriate
   - Handles 404 for invalid course IDs

4. Fix any missing routes or incorrect configurations

**Navigation Verification:**

5. Verify base.html includes:
   - All CSS files in correct order
   - All JS files in correct order
   - Sidebar partial
   - Header partial

6. Verify sidebar shows correct active state for each page

7. Verify breadcrumb trail is correct for each page

**Redirect Logic:**

8. Verify:
   - Unauthenticated users -> /login
   - After login -> /dashboard
   - After register -> /login
   - Invalid course ID -> /dashboard with error toast
  </action>
  <verify>
Run Flask app and verify:
- All routes return 200 (or 302 for redirects)
- No 500 errors on any page
- Active page highlighting works
- Breadcrumbs show correct trail
  </verify>
  <done>
All routes registered and working. Navigation between pages functions correctly.
  </done>
</task>

<task type="auto">
  <name>Task 2: Theme Consistency Check and Fixes</name>
  <files>
    static/css/main.css
    static/css/variables.css
    static/css/components.css
    static/css/pages/*.css
  </files>
  <action>
Audit and fix theme consistency:

**Color Audit:**
1. Search all CSS files for hardcoded colors
2. Replace with CSS variable references where appropriate
3. Ensure all pages use the locked color palette:
   - Background: #1a1a2e (base), #16213e (panels), #0f0f1a (inputs)
   - Accent: #4361ee primary, #3d8ee6 hover
   - Text: #ffffff primary, #a0a0a0 secondary, #606060 disabled
   - Borders: #2a2a4a

**Component Consistency:**
4. Verify buttons use consistent styling across pages
5. Verify form inputs have consistent appearance
6. Verify cards/panels have consistent styling
7. Verify modals have consistent appearance

**Spacing Consistency:**
8. Check padding/margin values are consistent
9. Verify grid/flex layouts align properly

**Fix Issues:**
10. Update any inconsistent colors to use variables
11. Fix any component styling discrepancies
12. Ensure hover/focus states are consistent

**Main.css Cleanup:**
13. Remove any conflicting styles from original main.css
14. Ensure import order is correct (variables first)
15. Add any missing global styles
  </action>
  <verify>
Visual inspection of each page:
- Colors match locked palette
- Buttons look consistent
- Forms look consistent
- Cards/panels look consistent
- No jarring visual inconsistencies
  </verify>
  <done>
Dark theme applied consistently across all pages. No hardcoded colors. All components match design system.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Visual and Functional Verification</name>
  <what-built>
Complete UI implementation for Course Builder Studio:
- Login and registration pages
- Dashboard with course cards
- Planner with outcomes and blueprint generation
- Builder with drag-drop tree
- Studio with streaming content generation
- Textbook with chapter management
- Publish with validation and export
- Collaboration UI (invites, comments, activity feed)
- Dark theme consistent across all pages
- Collapsible sidebar with course context
  </what-built>
  <how-to-verify>
1. Start Flask app: `python app.py`
2. Open browser to http://localhost:5003

**Auth Flow:**
- [ ] Visit / while logged out -> redirects to /login
- [ ] Login page displays centered card with dark theme
- [ ] Click "Sign up" -> goes to register page
- [ ] Register with valid details -> redirects to login
- [ ] Login with credentials -> redirects to dashboard

**Dashboard:**
- [ ] Dashboard shows course cards (or empty state)
- [ ] Create new course via modal -> card appears
- [ ] Delete course via modal -> card removed
- [ ] Sidebar shows "Select a Course"

**Planner:**
- [ ] Open a course -> planner page loads
- [ ] Sidebar shows course title and Planner active
- [ ] Course metadata form saves changes
- [ ] Learning outcomes CRUD works
- [ ] Blueprint generation starts and shows preview

**Builder:**
- [ ] Builder page shows tree structure
- [ ] Nodes expand/collapse
- [ ] Drag and drop reorders items
- [ ] Detail panel shows selected item
- [ ] Add/delete operations work

**Studio:**
- [ ] Studio shows activity list
- [ ] Select activity -> preview shows content or empty state
- [ ] Generate button starts streaming content
- [ ] Content appears progressively (not all at once)
- [ ] Inline editing works

**Textbook:**
- [ ] Chapter list shows learning outcomes
- [ ] Generate chapter -> content appears
- [ ] Glossary tab shows terms
- [ ] Preview displays formatted chapter

**Publish:**
- [ ] Validation section shows course status
- [ ] Export cards show all four formats
- [ ] Preview opens modal
- [ ] Download triggers file save

**Collaboration:**
- [ ] Invite modal opens from header
- [ ] Can create shareable link
- [ ] Comments panel shows on Studio page
- [ ] Activity feed shows recent changes

**Theme Consistency:**
- [ ] All pages have dark background (#1a1a2e)
- [ ] All cards have panel background (#16213e)
- [ ] Buttons are electric blue (#4361ee)
- [ ] No jarring color inconsistencies
- [ ] Sidebar collapses and expands smoothly
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
- All page routes return 200
- No JavaScript console errors
- No 500 errors
- Visual consistency across pages
- User flows complete successfully
- Human verification passed
</verification>

<success_criteria>
1. All 9 page routes work correctly
2. Navigation between pages is seamless
3. Sidebar context changes appropriately
4. Dark theme is consistent
5. No JavaScript errors in console
6. Human verification approved all checkpoints
7. Complete user flows work end-to-end
</success_criteria>

<output>
After completion, create `.planning/phases/11-ui-implementation/11-10-SUMMARY.md`
</output>
