<!-- Collaboration Invite Modal -->
<div id="collab-modal" class="modal" data-modal aria-hidden="true">
  <div class="modal-backdrop"></div>
  <div class="modal-content collab-modal">
    <div class="modal-header">
      <h2 data-i18n="collab.inviteCollaborator">Invite Collaborator</h2>
      <button type="button" class="modal-close-btn" data-modal-close aria-label="Close">&times;</button>
    </div>
    <div class="modal-body">
      <!-- Invite by Email Form -->
      <div class="invite-section">
        <h3 data-i18n="collab.inviteByEmail">Invite by Email</h3>
        <form id="invite-form" class="invite-form">
          <div class="form-group">
            <label for="invite-email" class="form-label required" data-i18n="collab.emailAddress">Email Address</label>
            <input type="email" id="invite-email" name="email" class="form-input"
                   data-i18n-placeholder="collab.emailPlaceholder" placeholder="collaborator@example.com" required>
          </div>
          <div class="form-row">
            <div class="form-group form-group-half">
              <label for="invite-role" class="form-label required" data-i18n="collab.role">Role</label>
              <select id="invite-role" name="role_id" class="form-select" required>
                <!-- Populated by JS -->
              </select>
            </div>
            <div class="form-group form-group-half">
              <label for="invite-expiry" class="form-label" data-i18n="collab.linkExpires">Link Expires</label>
              <select id="invite-expiry" name="expires_in" class="form-select">
                <option value="604800" data-i18n="collab.days7">7 days</option>
                <option value="2592000" data-i18n="collab.days30">30 days</option>
                <option value="" data-i18n="collab.never">Never</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label for="invite-message" class="form-label" data-i18n="collab.personalMessage">Personal Message (optional)</label>
            <textarea id="invite-message" name="message" class="form-textarea" rows="2"
                      data-i18n-placeholder="collab.messagePlaceholder" placeholder="Add a personal note..."></textarea>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary" data-i18n="collab.sendInvite">Send Invite</button>
          </div>
        </form>
      </div>

      <div class="invite-divider">
        <span data-i18n="common.or">or</span>
      </div>

      <!-- Shareable Link Section -->
      <div class="shareable-link-section">
        <h3 data-i18n="collab.createShareableLink">Create Shareable Link</h3>
        <p class="section-description" data-i18n="collab.shareableLinkDesc">Generate a link anyone can use to join with a specific role.</p>
        <div class="shareable-link-form">
          <div class="form-row">
            <div class="form-group form-group-half">
              <label for="link-role" class="form-label" data-i18n="collab.roleForLink">Role for Link</label>
              <select id="link-role" class="form-select">
                <!-- Populated by JS -->
              </select>
            </div>
            <div class="form-group form-group-half">
              <label for="link-expiry" class="form-label" data-i18n="collab.linkExpires">Link Expires</label>
              <select id="link-expiry" class="form-select">
                <option value="604800" data-i18n="collab.days7">7 days</option>
                <option value="2592000" data-i18n="collab.days30">30 days</option>
                <option value="" data-i18n="collab.never">Never</option>
              </select>
            </div>
          </div>
          <button type="button" id="create-link-btn" class="btn btn-secondary" data-i18n="collab.createLink">Create Link</button>
        </div>
        <div id="shareable-link-display" class="shareable-link hidden">
          <input type="text" id="shareable-link-input" class="form-input" readonly>
          <button type="button" id="copy-link-btn" class="btn btn-secondary btn-small" data-i18n="collab.copy">Copy</button>
        </div>
      </div>

      <!-- Current Collaborators -->
      <div class="collaborators-section">
        <h3 data-i18n="collab.currentCollaborators">Current Collaborators</h3>
        <div id="collaborator-list" class="collaborator-list">
          <!-- Populated by JS -->
          <div class="empty-state" data-i18n="collab.noCollaboratorsYet">No collaborators yet</div>
        </div>
      </div>

      <!-- Pending Invitations -->
      <div class="pending-section">
        <h3 data-i18n="collab.pendingInvitations">Pending Invitations</h3>
        <div id="pending-list" class="pending-list">
          <!-- Populated by JS -->
          <div class="empty-state" data-i18n="collab.noPendingInvitations">No pending invitations</div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" data-modal-close data-i18n="common.close">Close</button>
    </div>
  </div>
</div>
